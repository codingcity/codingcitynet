{% extends 'base.html' %}
{% load boards_filter %}
{% block content %}

<div class="container my-3">
    <div class="row my-3">


         <div class="col">
             <h1> {{ user }}'s History of Profile </h1>
         </div>
        <div class="col">
            {% if request.user.is_authenticated%}
                <a href="{% url 'profilehistory:profile_create' %}" type="button" class="btn btn-success float-end">프로필 작성하기</a>
            {% else %}
                <a href="{% url 'common:login' %}" type="button" class="btn btn-success float-end">프로필 작성하기</a>
            {% endif %}
        </div>
        <hr/>

            <table class="table table-striped table-hover">
              <thead class="thead-success">
                <tr>
                  <th scope="col">제 목</th>
                  <th scope="col">작성일</th>
                </tr>
              </thead>
              <tbody>

              {% for p in profile_list %}
                {% if user.is_authenticated%}
                    {% if user.is_staff %}
                        <tr>
                          <td>#{{p.pk}} -
                              <a href="{{ p.get_absolute_url }}">
                                {{p.intro}}
                              </a>
                          </td>
                          <td>{{p.created_at}} made by {{p.thisuser}}</td>
                        </tr>
                  {% else %}
                        {% if user == p.thisuser %}
                            <tr>
                              <td>
                                  <a href="{{ p.get_absolute_url }}">
                                    {{p.intro}}
                                  </a>
                              </td>
                              <td>{{p.created_at}}</td>
                            </tr>
                        {% endif %}
                  {% endif %}




                {% endif %}
              {% endfor %}

              </tbody>
            </table>

    </div>

</div>






{% endblock %}